<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget Planner - FinGuide</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary-color: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
            --success-color: #059669;
            --warning-color: #d97706;
            --error-color: #dc2626;
            --background: #ffffff;
            --card-background: #f8fafc;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .header {
            background: linear-gradient(135deg, var(--warning-color) 0%, #b45309 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        .budget-planner {
            padding: 3rem 0;
        }

        .budget-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .budget-form {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
        }

        .budget-summary {
            background: var(--card-background);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            height: fit-content;
            position: sticky;
            top: 2rem;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .form-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--warning-color);
            box-shadow: 0 0 0 3px rgba(217, 119, 6, 0.1);
        }

        .category-section {
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
        }

        .category-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--warning-color);
        }

        .expense-item {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 1rem;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .expense-item:last-child {
            border-bottom: none;
        }

        .expense-input {
            width: 120px;
        }

        .add-item-btn {
            background: var(--warning-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            margin-top: 1rem;
        }

        .add-item-btn:hover {
            background: #b45309;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .summary-item:last-child {
            border-bottom: none;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .summary-total {
            background: linear-gradient(135deg, var(--warning-color), #b45309);
            color: white;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 1rem;
            text-align: center;
        }

        .rule-breakdown {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .rule-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }

        .rule-item {
            text-align: center;
            padding: 1rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
        }

        .rule-percentage {
            font-size: 2rem;
            font-weight: 700;
            color: var(--warning-color);
        }

        .rule-label {
            font-weight: 500;
            margin: 0.5rem 0;
        }

        .rule-amount {
            color: var(--text-secondary);
        }

        .progress-bar {
            background: #e5e7eb;
            border-radius: 10px;
            height: 20px;
            margin: 1rem 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .progress-needs { background: #ef4444; }
        .progress-wants { background: #f59e0b; }
        .progress-savings { background: #10b981; }

        .navigation {
            text-align: center;
            padding: 2rem 0;
            border-top: 1px solid var(--border-color);
        }

        .nav-link {
            display: inline-block;
            background: var(--warning-color);
            color: white;
            text-decoration: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            margin: 0 0.5rem;
            transition: background-color 0.3s ease;
        }

        .nav-link:hover {
            background: #b45309;
        }

        @media (max-width: 768px) {
            .budget-grid {
                grid-template-columns: 1fr;
            }

            .rule-grid {
                grid-template-columns: 1fr;
            }

            .expense-item {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>Budget Planner</h1>
            <p>Take control of your finances with the 50/30/20 budgeting method</p>
        </div>
    </div>

    <div class="container">
        <div class="budget-planner">
            <div class="budget-grid">
                <div class="budget-form">
                    <h2 class="section-title">Monthly Income</h2>
                    <div class="form-group">
                        <label class="form-label" for="monthly-income">After-Tax Monthly Income ($)</label>
                        <input type="number" id="monthly-income" class="form-input" placeholder="5000" oninput="calculateBudget()">
                    </div>

                    <div class="category-section">
                        <h3 class="category-title">üè† Needs (50%)</h3>
                        <div id="needs-items">
                            <div class="expense-item">
                                <span>Rent/Mortgage</span>
                                <input type="number" class="form-input expense-input" data-category="needs" placeholder="0" oninput="calculateBudget()">
                            </div>
                            <div class="expense-item">
                                <span>Utilities</span>
                                <input type="number" class="form-input expense-input" data-category="needs" placeholder="0" oninput="calculateBudget()">
                            </div>
                            <div class="expense-item">
                                <span>Groceries</span>
                                <input type="number" class="form-input expense-input" data-category="needs" placeholder="0" oninput="calculateBudget()">
                            </div>
                            <div class="expense-item">
                                <span>Transportation</span>
                                <input type="number" class="form-input expense-input" data-category="needs" placeholder="0" oninput="calculateBudget()">
                            </div>
                            <div class="expense-item">
                                <span>Insurance</span>
                                <input type="number" class="form-input expense-input" data-category="needs" placeholder="0" oninput="calculateBudget()">
                            </div>
                        </div>
                        <button class="add-item-btn" onclick="addExpenseItem('needs')">+ Add Need</button>
                    </div>

                    <div class="category-section">
                        <h3 class="category-title">üéØ Wants (30%)</h3>
                        <div id="wants-items">
                            <div class="expense-item">
                                <span>Entertainment</span>
                                <input type="number" class="form-input expense-input" data-category="wants" placeholder="0" oninput="calculateBudget()">
                            </div>
                            <div class="expense-item">
                                <span>Dining Out</span>
                                <input type="number" class="form-input expense-input" data-category="wants" placeholder="0" oninput="calculateBudget()">
                            </div>
                            <div class="expense-item">
                                <span>Subscriptions</span>
                                <input type="number" class="form-input expense-input" data-category="wants" placeholder="0" oninput="calculateBudget()">
                            </div>
                            <div class="expense-item">
                                <span>Shopping</span>
                                <input type="number" class="form-input expense-input" data-category="wants" placeholder="0" oninput="calculateBudget()">
                            </div>
                        </div>
                        <button class="add-item-btn" onclick="addExpenseItem('wants')">+ Add Want</button>
                    </div>

                    <div class="category-section">
                        <h3 class="category-title">üí∞ Savings (20%)</h3>
                        <div id="savings-items">
                            <div class="expense-item">
                                <span>Emergency Fund</span>
                                <input type="number" class="form-input expense-input" data-category="savings" placeholder="0" oninput="calculateBudget()">
                            </div>
                            <div class="expense-item">
                                <span>401(k) / Retirement</span>
                                <input type="number" class="form-input expense-input" data-category="savings" placeholder="0" oninput="calculateBudget()">
                            </div>
                            <div class="expense-item">
                                <span>Extra Debt Payment</span>
                                <input type="number" class="form-input expense-input" data-category="savings" placeholder="0" oninput="calculateBudget()">
                            </div>
                        </div>
                        <button class="add-item-btn" onclick="addExpenseItem('savings')">+ Add Savings</button>
                    </div>
                </div>

                <div class="budget-summary">
                    <h2 class="section-title">Budget Summary</h2>
                    
                    <div class="summary-item">
                        <span>Monthly Income:</span>
                        <span id="summary-income">$0</span>
                    </div>
                    
                    <div class="summary-item">
                        <span>Total Needs:</span>
                        <span id="summary-needs">$0</span>
                    </div>
                    
                    <div class="summary-item">
                        <span>Total Wants:</span>
                        <span id="summary-wants">$0</span>
                    </div>
                    
                    <div class="summary-item">
                        <span>Total Savings:</span>
                        <span id="summary-savings">$0</span>
                    </div>
                    
                    <div class="summary-item">
                        <span>Total Allocated:</span>
                        <span id="summary-total">$0</span>
                    </div>
                    
                    <div class="summary-item">
                        <span>Remaining:</span>
                        <span id="summary-remaining">$0</span>
                    </div>

                    <div class="summary-total">
                        <div>Budget Status</div>
                        <div id="budget-status" style="font-size: 1.25rem; margin-top: 0.5rem;">Perfect Balance</div>
                    </div>
                </div>
            </div>

            <div class="rule-breakdown">
                <h2 class="section-title">50/30/20 Rule Breakdown</h2>
                <div class="rule-grid">
                    <div class="rule-item">
                        <div class="rule-percentage">50%</div>
                        <div class="rule-label">Needs</div>
                        <div class="rule-amount" id="rule-needs">$0</div>
                        <div class="progress-bar">
                            <div class="progress-fill progress-needs" id="progress-needs" style="width: 0%"></div>
                        </div>
                        <div id="needs-status">$0 remaining</div>
                    </div>
                    
                    <div class="rule-item">
                        <div class="rule-percentage">30%</div>
                        <div class="rule-label">Wants</div>
                        <div class="rule-amount" id="rule-wants">$0</div>
                        <div class="progress-bar">
                            <div class="progress-fill progress-wants" id="progress-wants" style="width: 0%"></div>
                        </div>
                        <div id="wants-status">$0 remaining</div>
                    </div>
                    
                    <div class="rule-item">
                        <div class="rule-percentage">20%</div>
                        <div class="rule-label">Savings</div>
                        <div class="rule-amount" id="rule-savings">$0</div>
                        <div class="progress-bar">
                            <div class="progress-fill progress-savings" id="progress-savings" style="width: 0%"></div>
                        </div>
                        <div id="savings-status">$0 remaining</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="navigation">
            <a href="/calculators/" class="nav-link">üßÆ Calculators</a>
            <a href="/goals/" class="nav-link">üéØ Goals</a>
            <a href="/chat/" class="nav-link">üí¨ AI Chat</a>
            <a href="/dashboard/" class="nav-link">üìä Dashboard</a>
            <a href="/" class="nav-link">üè† Home</a>
        </div>
    </div>

    <script>
        function calculateBudget() {
            const income = parseFloat(document.getElementById('monthly-income').value) || 0;
            
            // Calculate totals for each category
            const needsTotal = calculateCategoryTotal('needs');
            const wantsTotal = calculateCategoryTotal('wants');
            const savingsTotal = calculateCategoryTotal('savings');
            const totalAllocated = needsTotal + wantsTotal + savingsTotal;
            const remaining = income - totalAllocated;

            // Update summary
            document.getElementById('summary-income').textContent = '$' + income.toFixed(0);
            document.getElementById('summary-needs').textContent = '$' + needsTotal.toFixed(0);
            document.getElementById('summary-wants').textContent = '$' + wantsTotal.toFixed(0);
            document.getElementById('summary-savings').textContent = '$' + savingsTotal.toFixed(0);
            document.getElementById('summary-total').textContent = '$' + totalAllocated.toFixed(0);
            document.getElementById('summary-remaining').textContent = '$' + remaining.toFixed(0);

            // Update budget status
            const statusEl = document.getElementById('budget-status');
            if (remaining > 0) {
                statusEl.textContent = 'Under Budget ‚úÖ';
                statusEl.style.color = '#10b981';
            } else if (remaining < 0) {
                statusEl.textContent = 'Over Budget ‚ö†Ô∏è';
                statusEl.style.color = '#ef4444';
            } else {
                statusEl.textContent = 'Perfect Balance üéØ';
                statusEl.style.color = '#ffffff';
            }

            // Update 50/30/20 breakdown
            if (income > 0) {
                updateRuleBreakdown(income, needsTotal, wantsTotal, savingsTotal);
            }
        }

        function calculateCategoryTotal(category) {
            const inputs = document.querySelectorAll(`input[data-category="${category}"]`);
            let total = 0;
            inputs.forEach(input => {
                total += parseFloat(input.value) || 0;
            });
            return total;
        }

        function updateRuleBreakdown(income, needsTotal, wantsTotal, savingsTotal) {
            const needsTarget = income * 0.5;
            const wantsTarget = income * 0.3;
            const savingsTarget = income * 0.2;

            // Update target amounts
            document.getElementById('rule-needs').textContent = '$' + needsTarget.toFixed(0);
            document.getElementById('rule-wants').textContent = '$' + wantsTarget.toFixed(0);
            document.getElementById('rule-savings').textContent = '$' + savingsTarget.toFixed(0);

            // Update progress bars and status
            updateCategoryProgress('needs', needsTotal, needsTarget);
            updateCategoryProgress('wants', wantsTotal, wantsTarget);
            updateCategoryProgress('savings', savingsTotal, savingsTarget);
        }

        function updateCategoryProgress(category, actual, target) {
            const percentage = Math.min(100, (actual / target) * 100);
            const remaining = target - actual;
            
            document.getElementById(`progress-${category}`).style.width = percentage + '%';
            
            const statusEl = document.getElementById(`${category}-status`);
            if (remaining > 0) {
                statusEl.textContent = '$' + remaining.toFixed(0) + ' remaining';
                statusEl.style.color = '#10b981';
            } else if (remaining < 0) {
                statusEl.textContent = '$' + Math.abs(remaining).toFixed(0) + ' over';
                statusEl.style.color = '#ef4444';
            } else {
                statusEl.textContent = 'Target met!';
                statusEl.style.color = '#10b981';
            }
        }

        function addExpenseItem(category) {
            const container = document.getElementById(`${category}-items`);
            const itemName = prompt(`Enter ${category.slice(0, -1)} name:`);
            
            if (itemName) {
                const newItem = document.createElement('div');
                newItem.className = 'expense-item';
                newItem.innerHTML = `
                    <span>${itemName}</span>
                    <input type="number" class="form-input expense-input" data-category="${category}" placeholder="0" oninput="calculateBudget()">
                `;
                container.appendChild(newItem);
            }
        }

        // Initialize with sample income
        document.getElementById('monthly-income').value = '5000';
        calculateBudget();
    </script>
</body>
</html>
